{% extends "header.html" %}
{% block content %}
<!DOCTYPE html>
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'css/rosters.css' %}">
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Overwatch 2 {{OW_Team.name}}</title>
</head>
	<body>
		<h1>{{OW_Team.name}}</h1>
		<div class='add-delete-buttons'>
			<form method="GET" action="{% url 'add-roster-player' OW_Team.id %}">
				{% csrf_token %}
				<button class='add-button' type="submit">Add Player</button>
			</form>
			<form method="GET" action="{% url 'add-match' OW_Team.id %}">
				{% csrf_token %}
				<button class='add-button' type="submit">Add Match</button>
			</form>
			<form method="GET" action="{% url 'active-player' OW_Team.id %}">
				{% csrf_token %}
				<button class='add-button' type="submit">Activate Player</button>
			</form>
		</div>
			{%if Roster %}
			<h4>Roster</h4>
				<ul>
				{% for player in Roster %}
					<li>
						<div class='roster'>
							<span>{{ player.first_name }} {{ player.last_name }}:</span>
							<span style="margin-right: 10px;">{{ player.role }}</span>
							<form method="POST" action="{% url 'delete-roster-player' player.id %}">
								{% csrf_token %}
								<button class = 'delete-button' type="submit">Deactivate Player</button>
							</form>
						</div>
					</li>
				{% endfor %}
				</ul>
			{%else%}
				<p>No Players on Roster</p>
			{%endif%}
			<div>
				<h2>Team Stats</h2>
				{% for map_type, stats in Map_Stats.items %}
					<div class='map-stats'>
						<h2>{{ map_type }} Win Rate</h2>
						{% if stats.image_url %}
           					<img src="{{ stats.image_url }}" alt="{{ map_type }}">
						{% endif %}
						<p>Total Games: {{ stats.total }}</p>
						<p>Wins: {{ stats.wins }}</p>
						<p>Win Rate: {{ stats.winrate }}%</p>
					</div>
				{% endfor %}
			<div/>
			{% include "team_templates/match_history.html" with Matches=Matches %}
		<a href="/Overwatch/rosters/">Back to Overwatch Teams</a>
	</body>
</html>
{%endblock%}